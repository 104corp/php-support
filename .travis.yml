sudo: false
os: linux
dist: trusty
language: php

php:
- 5.5
- 5.6
- 7.0
- 7.1
- 7.2
- nightly

matrix:
  allow_failures:
  - php: nightly

branches:
  only:
  - master
  - /^\d+\.x$/
  - /^\d+\.\d+\.\d+$/

before_script:
- composer install --prefer-dist

script:
- php vendor/bin/phpcs
- php vendor/bin/phpunit

cache:
  directories:
  # See https://blog.wyrihaximus.net/2015/07/composer-cache-on-travis/
  - "$HOME/.composer/cache/files"
  - vendor

notifications:
  email: false
  slack:
    on_success: change
    on_failure: always
    rooms:
    - secure: J+ksdQi0T+jtohdAU4hmW+FlwISkhym37MHqPGcy9m81xzJGMYN3W4sUz2ZoQPO0Iq1u4lOeKr1O6zK1ALb4nhIh+WyhuZlY0uyAdWiZF9xS43z+lQdJLgrLPw/5ghGA4dYy+zexOUWKmj4su+ryhi/IWgF44NjCGCEoyr81qosygrLfFR62fhNto28WZlJDdU/6Zehteo5HAt/xlr/2UavUgHqJ+NCAt+mHLzkCNTE/TZAbodgj3uAdwZxbbHtorCm62W3kzPy15Efb4Ljsge8zG/PG37ijqYqC3UlFmG95o/1sao1bb0VN2IpclSjYkEDDmbo0eWpesIEHuofpR9tlXGy06nm9qkeK6IaGKfX/P6XRSFwGJ7t6td5ksJzNNR5U6lJSyv4jOalknBFlmoYserrgG/5GAtuqB8MpfsqWykmV3qGv/vKi3z3UEknO86zT1IHH9DXRV9rSY9t+BJ0ns20IaDHK5SSrgEEQ8KctIRX7SNtfTiY7jZB3/mcEABe8bzAKjUvG33OXs7HjRI12bA+RCu/hN6zUFZaht3JrcR0opanzyqKqazsoZoYA0vGbnQtXy1mDkImxWyouLzhP99LdQqMBEOlhz1XmtbyIvDH4v/iHFLr5mqAhYzI7/sNvhrkWybuTMqUG0t+vXV6SCzxh0aPD9Fi+BrLWPO0=
